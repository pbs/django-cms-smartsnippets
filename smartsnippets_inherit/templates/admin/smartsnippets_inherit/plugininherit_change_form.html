{% extends "admin/cms/page/plugin_change_form.html" %}
{% load url from future %}
{% block extrahead %}
{{block.super}}
<script type="text/javascript" src="{{STATIC_URL}}admin/smartsnippet_inherit/js/plugininherit_form.js"></script>
<script type="text/javascript">
(function($) {
    $(document).ready(function() {
        SnippetVariablesEditor.init({
            static_url: "{{STATIC_URL}}",
            variables_module: "#overwritten_variables",
            urls: {
                variables: "{% url 'smartsnippets_inherit.views.variables_edit_view' plugin_id=plugin.id %}"
            }
        });
    });
}(django.jQuery));
</script>
{% endblock %}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}admin/smartsnippet_inherit/css/plugininherit_form.css">
{{block.super}}
{% endblock %}


{% block after_related_objects %}{{block.super}}
    <div class="module" id='overwritten_variables'>
        <h2>Overwrite snippet variables</h2>
        {% if not add %}
        <ul class='snippets-list'>
        {% for snippet_plugin in snippet_plugins %}
            <li data-snippet='{{snippet_plugin.id}}'>{{snippet_plugin}}</li>
        {% empty %}
            <p>No variables available.</p>
        {% endfor %}
        </ul>
        <div class='variables-list'/>
        {% else %}
        <p>You need to save before you can overwrite variables.</p>
        {% endif %}
    </div>
{% endblock %}
